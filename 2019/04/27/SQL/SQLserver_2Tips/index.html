<!DOCTYPE html><html class="theme-next gemini use-motion" lang="en"><head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






  
  
  



















  






  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">


  <link rel="mask-icon" href="/images/logo.svg" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.0.1',
    sidebar: {"position":"left","display":"always","offset":12},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="SQLsever作为受到广大企业用户的青睐、使用最广的数据库之一，凭借其丰富的内置函数，完善的权限管理，良好的拓展性和优越的性能一直备受好评。可是这么完美的数据库却往往暗藏杀机，接下来为大家拆招解招，看看项目过程冲常见的10个小陷阱。(本文是项目测试中实际遇到问题的总结，包含大量例子，建议阅读时间10分钟) 01 IsNumeric()的误判曾几何时，遇到过这样一个需求：  表中的某一列是区号和地">
<meta name="keywords" content="数据库,SQl">
<meta property="og:type" content="article">
<meta property="og:title" content="SQLserver常见的10个陷阱">
<meta property="og:url" content="http://yoursite.com/2019/04/27/SQL/SQLserver_2Tips/index.html">
<meta property="og:site_name" content="渤海观星客">
<meta property="og:description" content="SQLsever作为受到广大企业用户的青睐、使用最广的数据库之一，凭借其丰富的内置函数，完善的权限管理，良好的拓展性和优越的性能一直备受好评。可是这么完美的数据库却往往暗藏杀机，接下来为大家拆招解招，看看项目过程冲常见的10个小陷阱。(本文是项目测试中实际遇到问题的总结，包含大量例子，建议阅读时间10分钟) 01 IsNumeric()的误判曾几何时，遇到过这样一个需求：  表中的某一列是区号和地">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-08-15T00:56:18.549Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQLserver常见的10个陷阱">
<meta name="twitter:description" content="SQLsever作为受到广大企业用户的青睐、使用最广的数据库之一，凭借其丰富的内置函数，完善的权限管理，良好的拓展性和优越的性能一直备受好评。可是这么完美的数据库却往往暗藏杀机，接下来为大家拆招解招，看看项目过程冲常见的10个小陷阱。(本文是项目测试中实际遇到问题的总结，包含大量例子，建议阅读时间10分钟) 01 IsNumeric()的误判曾几何时，遇到过这样一个需求：  表中的某一列是区号和地">






  <link rel="canonical" href="http://yoursite.com/2019/04/27/SQL/SQLserver_2Tips/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>SQLserver常见的10个陷阱 | 渤海观星客</title>
  












  <style>html {
  line-height: 1.15; 
  -webkit-text-size-adjust: 100%; 
}
body {
  margin: 0;
}
main {
  display: block;
}
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}
hr {
  box-sizing: content-box; 
  height: 0; 
  overflow: visible; 
}
pre {
  font-family: monospace, monospace; 
  font-size: 1em; 
}
a {
  background-color: transparent;
}
abbr[title] {
  border-bottom: none; 
  text-decoration: underline; 
  text-decoration: underline dotted; 
}
b,
strong {
  font-weight: bolder;
}
code,
kbd,
samp {
  font-family: monospace, monospace; 
  font-size: 1em; 
}
small {
  font-size: 80%;
}
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
sub {
  bottom: -0.25em;
}
sup {
  top: -0.5em;
}
img {
  border-style: none;
}
button,
input,
optgroup,
select,
textarea {
  font-family: inherit; 
  font-size: 100%; 
  line-height: 1.15; 
  margin: 0; 
}
button,
input {

  overflow: visible;
}
button,
select {

  text-transform: none;
}
button,
[type="button"],
[type="reset"],
[type="submit"] {
  -webkit-appearance: button;
}
button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}
button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}
fieldset {
  padding: 0.35em 0.75em 0.625em;
}
legend {
  box-sizing: border-box; 
  color: inherit; 
  display: table; 
  max-width: 100%; 
  padding: 0; 
  white-space: normal; 
}
progress {
  vertical-align: baseline;
}
textarea {
  overflow: auto;
}
[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; 
  padding: 0; 
}
[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}
[type="search"] {
  -webkit-appearance: textfield; 
  outline-offset: -2px; 
}
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}
::-webkit-file-upload-button {
  -webkit-appearance: button; 
  font: inherit; 
}
details {
  display: block;
}
summary {
  display: list-item;
}
template {
  display: none;
}
[hidden] {
  display: none;
}
::selection {
  background: #262a30;
  color: #fff;
}
body {
  position: relative;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
  font-size: 14px;
  line-height: 2;
  color: #555;
  background: #eee;
}
@media (max-width: 991px) {
  body {
    padding-right: 0 !important;
  }
}
@media (min-width: 1200px) {
  body {
    font-size: 16px;
  }
}
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 20px 0 15px;
  padding: 0;
  font-weight: bold;
  line-height: 1.5;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
h1 {
  font-size: 22px;
}
h1 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h1 {
    font-size: 18px;
  }
  h1 code {
    font-size: 1em;
  }
}
h2 {
  font-size: 20px;
}
h2 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h2 {
    font-size: 16px;
  }
  h2 code {
    font-size: 1em;
  }
}
h3 {
  font-size: 18px;
}
h3 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h3 {
    font-size: 14px;
  }
  h3 code {
    font-size: 1em;
  }
}
h4 {
  font-size: 16px;
}
h4 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h4 {
    font-size: 12px;
  }
  h4 code {
    font-size: 1em;
  }
}
h5 {
  font-size: 14px;
}
h5 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h5 {
    font-size: 10px;
  }
  h5 code {
    font-size: 1em;
  }
}
h6 {
  font-size: 12px;
}
h6 code {
  font-size: 1em;
}
@media (max-width: 767px) {
  h6 {
    font-size: 8px;
  }
  h6 code {
    font-size: 1em;
  }
}
p {
  margin: 0 0 20px 0;
}
a,
span.exturl {
  overflow-wrap: break-word;
  word-wrap: break-word;
  background-color: transparent;
  color: #555;
  text-decoration: none;
  outline: none;
  border-bottom: 1px solid #999;
  cursor: pointer;
}
a:hover,
span.exturl:hover {
  color: #222;
  border-bottom-color: #222;
}
video {
  max-width: 100%;
  display: block;
  margin-left: auto;
  margin-right: auto;
}
img {
  display: block;
  margin: auto;
  max-width: 100%;
  height: auto;
}
hr {
  margin: 40px 0;
  height: 3px;
  border: none;
  background-color: #ddd;
  background-image: repeating-linear-gradient(-45deg, #fff, #fff 4px, transparent 4px, transparent 8px);
}
blockquote {
  margin: 0;
  padding: 0 15px;
  color: #666;
  border-left: 4px solid #ddd;
}
blockquote cite::before {
  content: "-";
  padding: 0 5px;
}
dt {
  font-weight: 700;
}
dd {
  margin: 0;
  padding: 0;
}
kbd {
  border: 1px solid #ccc;
  border-radius: 0.2em;
  box-shadow: 0.1em 0.1em 0.2em rgba(0,0,0,0.1);
  background-color: #f9f9f9;
  font-family: inherit;
  background-image: linear-gradient(top, #eee, #fff, #eee);
  padding: 0.1em 0.3em;
  white-space: nowrap;
}
.text-left {
  text-align: left;
}
.text-center {
  text-align: center;
}
.text-right {
  text-align: right;
}
.text-justify {
  text-align: justify;
}
.text-nowrap {
  white-space: nowrap;
}
.text-lowercase {
  text-transform: lowercase;
}
.text-uppercase {
  text-transform: uppercase;
}
.text-capitalize {
  text-transform: capitalize;
}
.center-block {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.clearfix:before,
.clearfix:after {
  content: " ";
  display: table;
}
.clearfix:after {
  clear: both;
}
.pullquote {
  width: 45%;
}
.pullquote.left {
  float: left;
  margin-left: 5px;
  margin-right: 10px;
}
.pullquote.right {
  float: right;
  margin-left: 10px;
  margin-right: 5px;
}
.affix {
  position: fixed;
}
.translation {
  margin-top: -20px;
  font-size: 14px;
  color: #999;
}
.scrollbar-measure {
  width: 100px;
  height: 100px;
  overflow: scroll;
  position: absolute;
  top: -9999px;
}
.use-motion .motion-element {
  opacity: 0;
}
.table-container {
  margin: 20px 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
table {
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  font-size: 14px;
}
table > tbody > tr:nth-of-type(odd) {
  background-color: #f9f9f9;
}
table > tbody > tr:hover {
  background-color: #f5f5f5;
}
caption,
th,
td {
  padding: 8px;
  text-align: left;
  vertical-align: middle;
  font-weight: normal;
}
th,
td {
  border: 1px solid #ddd;
  border-bottom: 3px solid #ddd;
}
th {
  padding-bottom: 10px;
  font-weight: 700;
}
td {
  border-bottom-width: 1px;
}
@media (max-width: 567px) {
  .header-inner {
    margin-bottom: initial !important;
  }
  .main-inner {
    margin-top: initial !important;
  }
  .content-wrap {
    padding: initial !important;
  }
  .posts-expand {
    padding-top: 8px !important;
    margin: initial !important;
  }
  .posts-expand .post-header {
    padding: 0 18px;
  }
  .posts-expand .post-meta {
    margin: 3px 0 10px 0 !important;
  }
  .post-block {
    padding: 8px 0 !important;
  }
  .post-body h2,
  .post-body h3,
  .post-body h4,
  .post-body h5,
  .post-body h6 {
    margin: 10px 18px 8px;
  }
  .post-body .note h2,
  .post-body .tabs .tab-content .tab-pane h2,
  .post-body .note h3,
  .post-body .tabs .tab-content .tab-pane h3,
  .post-body .note h4,
  .post-body .tabs .tab-content .tab-pane h4,
  .post-body .note h5,
  .post-body .tabs .tab-content .tab-pane h5,
  .post-body .note h6,
  .post-body .tabs .tab-content .tab-pane h6 {
    margin: 0 5px;
  }
  .post-body > p {
    margin: 0 0 10px 0;
    padding: 0 18px;
  }
  .post-body > ul,
  .post-body > li {
    padding: 0 18px;
  }
  .post-body > blockquote {
    margin: 0 18px;
  }
  .post-body > span.exturl {
    margin-left: 18px;
  }
  .post-body .note > p,
  .post-body .tabs .tab-content .tab-pane > p {
    padding: 0 5px;
  }
  .post-body .video-container .fluid-vids {
    margin-bottom: 10px !important;
  }
  .post-body .note {
    padding: 10px !important;
    margin-bottom: 10px !important;
  }
  .post-body .note:not(.no-icon) {
    padding-left: 35px !important;
  }
  .post-body .note:not(.no-icon):before {
    top: 8px !important;
    left: 12px !important;
  }
  .post-body .tabs .tab-content .tab-pane {
    padding: 10px 10px 0 10px !important;
  }
  .post-nav {
    padding-bottom: 2px;
  }
}
html,
body {
  height: 100%;
}
.container {
  position: relative;
}
.header-inner {
  margin: 0 auto;
  padding: 100px 0 70px;
  width: calc(100% - 20px);
}
@media (min-width: 1200px) {
  .container .header-inner {
    width: 1160px;
  }
}
@media (min-width: 1600px) {
  .container .header-inner {
    width: 73%;
  }
}
.main-inner {
  margin: 0 auto;
  width: calc(100% - 20px);
}
@media (min-width: 1200px) {
  .container .main-inner {
    width: 1160px;
  }
}
@media (min-width: 1600px) {
  .container .main-inner {
    width: 73%;
  }
}
.footer {
  padding: 20px 0;
}
.footer-inner {
  box-sizing: border-box;
  margin: 0px auto;
  width: calc(100% - 20px);
}
@media (min-width: 1200px) {
  .container .footer-inner {
    width: 1160px;
  }
}
@media (min-width: 1600px) {
  .container .footer-inner {
    width: 73%;
  }
}
pre,
.highlight {
  overflow: auto;
  margin: 20px 0;
  padding: 0;
  font-size: 14px;
  color: #c5c8c6;
  background: #1d1f21;
  line-height: 1.6;
}
pre,
code {
  font-family: consolas, Menlo, "PingFang SC", "Microsoft YaHei", monospace;
}
code {
  overflow-wrap: break-word;
  word-wrap: break-word;
  padding: 2px 4px;
  color: #555;
  background: #eee;
  border-radius: 3px;
  font-size: 14px;
}
pre {
  padding: 10px;
}
pre code {
  padding: 0;
  color: #c5c8c6;
  background: none;
  text-shadow: none;
}
.highlight {
  border-radius: 1px;
}
.highlight pre {
  border: none;
  margin: 0;
  padding: 10px 0;
}
.highlight table {
  margin: 0;
  width: auto;
  border: none;
}
.highlight td {
  border: none;
  padding: 0;
}
.highlight figcaption {
  font-size: 1em;
  color: #c5c8c6;
  line-height: 1em;
  margin-bottom: 1em;
  margin: 0em;
  padding: 0.5em;
  background: #eee;
  border-bottom: 1px solid #e9e9e9;
}
.highlight figcaption:before,
.highlight figcaption:after {
  content: " ";
  display: table;
}
.highlight figcaption:after {
  clear: both;
}
.highlight figcaption a {
  float: right;
  color: #c5c8c6;
}
.highlight figcaption a:hover {
  border-bottom-color: #c5c8c6;
}
.highlight .gutter pre {
  padding-left: 10px;
  padding-right: 10px;
  color: #888f96;
  text-align: right;
  background-color: #000;
}
.highlight .code pre {
  width: 100%;
  padding-left: 10px;
  padding-right: 10px;
  background-color: #1d1f21;
}
.highlight .line {
  height: 20px;
}
.gutter {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.gist table {
  width: auto;
}
.gist table td {
  border: none;
}
pre .deletion {
  background: #800000;
}
pre .addition {
  background: #008000;
}
pre .meta {
  color: #b294bb;
}
pre .comment {
  color: #969896;
}
pre .variable,
pre .attribute,
pre .tag,
pre .name,
pre .regexp,
pre .ruby .constant,
pre .xml .tag .title,
pre .xml .pi,
pre .xml .doctype,
pre .html .doctype,
pre .css .id,
pre .css .class,
pre .css .pseudo {
  color: #c66;
}
pre .number,
pre .preprocessor,
pre .built_in,
pre .builtin-name,
pre .literal,
pre .params,
pre .constant,
pre .command {
  color: #de935f;
}
pre .ruby .class .title,
pre .css .rules .attribute,
pre .string,
pre .symbol,
pre .value,
pre .inheritance,
pre .header,
pre .ruby .symbol,
pre .xml .cdata,
pre .special,
pre .formula {
  color: #b5bd68;
}
pre .title,
pre .css .hexcolor {
  color: #8abeb7;
}
pre .function,
pre .python .decorator,
pre .python .title,
pre .ruby .function .title,
pre .ruby .title .keyword,
pre .perl .sub,
pre .javascript .title,
pre .coffeescript .title {
  color: #81a2be;
}
pre .keyword,
pre .javascript .function {
  color: #b294bb;
}
.posts-expand .post-body img.full-image {
  border: none;
}
.blockquote-center,
.page-home .post-type-quote blockquote,
.page-post-detail .post-type-quote blockquote {
  position: relative;
  margin: 40px 0;
  padding: 0;
  border-left: none;
  text-align: center;
}
.blockquote-center::before,
.page-home .post-type-quote blockquote::before,
.page-post-detail .post-type-quote blockquote::before,
.blockquote-center::after,
.page-home .post-type-quote blockquote::after,
.page-post-detail .post-type-quote blockquote::after {
  position: absolute;
  content: ' ';
  display: block;
  width: 100%;
  height: 24px;
  opacity: 0.2;
  background-repeat: no-repeat;
  background-position: 0 -6px;
  background-size: 22px 22px;
}
.blockquote-center::before,
.page-home .post-type-quote blockquote::before,
.page-post-detail .post-type-quote blockquote::before {
  top: -20px;
  background-image: url("../images/quote-l.svg");
  border-top: 1px solid #ccc;
}
.blockquote-center::after,
.page-home .post-type-quote blockquote::after,
.page-post-detail .post-type-quote blockquote::after {
  bottom: -20px;
  background-image: url("../images/quote-r.svg");
  border-bottom: 1px solid #ccc;
  background-position: 100% 8px;
}
.blockquote-center p,
.page-home .post-type-quote blockquote p,
.page-post-detail .post-type-quote blockquote p,
.blockquote-center div,
.page-home .post-type-quote blockquote div,
.page-post-detail .post-type-quote blockquote div {
  text-align: center;
}
.post .post-body .group-picture img {
  box-sizing: border-box;
  padding: 0 3px;
  border: none;
}
.post .group-picture-row {
  overflow: hidden;
  margin-top: 6px;
}
.post .group-picture-row:first-child {
  margin-top: 0;
}
.post .group-picture-column {
  float: left;
}
.page-post-detail .post-body .group-picture-column {
  float: none;
  margin-top: 10px;
  width: auto !important;
}
.page-post-detail .post-body .group-picture-column img {
  margin: 0 auto;
}
.page-archive .group-picture-container {
  overflow: hidden;
}
.page-archive .group-picture-row {
  float: left;
}
.page-archive .group-picture-row:first-child {
  margin-top: 6px;
}
.page-archive .group-picture-column {
  max-width: 150px;
  max-height: 150px;
}
.post-body .label {
  display: inline;
  padding: 0 2px;
  white-space: nowrap;
}
.post-body .label.default {
  background-color: #f0f0f0;
}
.post-body .label.primary {
  background-color: #efe6f7;
}
.post-body .label.info {
  background-color: #e5f2f8;
}
.post-body .label.success {
  background-color: #e7f4e9;
}
.post-body .label.warning {
  background-color: #fcf6e1;
}
.post-body .label.danger {
  background-color: #fae8eb;
}
.post-body .note {
  position: relative;
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid #eee;
  border-left-width: 5px;
  border-radius: 3px;
}
.post-body .note h2,
.post-body .note h3,
.post-body .note h4,
.post-body .note h5,
.post-body .note h6 {
  margin-top: 3px;
  margin-bottom: 0;
  border-bottom: initial;
  padding-top: 0 !important;
}
.post-body .note p:first-child,
.post-body .note ul:first-child,
.post-body .note ol:first-child,
.post-body .note table:first-child,
.post-body .note pre:first-child,
.post-body .note blockquote:first-child {
  margin-top: 0;
}
.post-body .note p:last-child,
.post-body .note ul:last-child,
.post-body .note ol:last-child,
.post-body .note table:last-child,
.post-body .note pre:last-child,
.post-body .note blockquote:last-child {
  margin-bottom: 0;
}
.post-body .note:not(.no-icon) {
  padding-left: 45px;
}
.post-body .note:not(.no-icon):before {
  position: absolute;
  font-family: 'FontAwesome';
  font-size: larger;
  top: 13px;
  left: 15px;
}
.post-body .note.default {
  border-left-color: #777;
}
.post-body .note.default h2,
.post-body .note.default h3,
.post-body .note.default h4,
.post-body .note.default h5,
.post-body .note.default h6 {
  color: #777;
}
.post-body .note.default:not(.no-icon):before {
  content: "\f0a9";
  color: #777;
}
.post-body .note.primary {
  border-left-color: #6f42c1;
}
.post-body .note.primary h2,
.post-body .note.primary h3,
.post-body .note.primary h4,
.post-body .note.primary h5,
.post-body .note.primary h6 {
  color: #6f42c1;
}
.post-body .note.primary:not(.no-icon):before {
  content: "\f055";
  color: #6f42c1;
}
.post-body .note.info {
  border-left-color: #428bca;
}
.post-body .note.info h2,
.post-body .note.info h3,
.post-body .note.info h4,
.post-body .note.info h5,
.post-body .note.info h6 {
  color: #428bca;
}
.post-body .note.info:not(.no-icon):before {
  content: "\f05a";
  color: #428bca;
}
.post-body .note.success {
  border-left-color: #5cb85c;
}
.post-body .note.success h2,
.post-body .note.success h3,
.post-body .note.success h4,
.post-body .note.success h5,
.post-body .note.success h6 {
  color: #5cb85c;
}
.post-body .note.success:not(.no-icon):before {
  content: "\f058";
  color: #5cb85c;
}
.post-body .note.warning {
  border-left-color: #f0ad4e;
}
.post-body .note.warning h2,
.post-body .note.warning h3,
.post-body .note.warning h4,
.post-body .note.warning h5,
.post-body .note.warning h6 {
  color: #f0ad4e;
}
.post-body .note.warning:not(.no-icon):before {
  content: "\f06a";
  color: #f0ad4e;
}
.post-body .note.danger {
  border-left-color: #d9534f;
}
.post-body .note.danger h2,
.post-body .note.danger h3,
.post-body .note.danger h4,
.post-body .note.danger h5,
.post-body .note.danger h6 {
  color: #d9534f;
}
.post-body .note.danger:not(.no-icon):before {
  content: "\f056";
  color: #d9534f;
}
.post-body .tabs {
  position: relative;
  display: block;
  margin-bottom: 20px;
  padding-top: 10px;
}
.post-body .tabs ul.nav-tabs {
  margin: 0;
  padding: 0;
  display: flex;
  margin-bottom: -1px;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs {
    display: block;
    margin-bottom: 5px;
  }
}
.post-body .tabs ul.nav-tabs li.tab {
  list-style-type: none !important;
  margin: 0 0.25em 0 0;
  border-top: 3px solid transparent;
  border-left: 1px solid transparent;
  border-right: 1px solid transparent;
  transition-duration: 0.2s;
  transition-timing-function: ease-out;
  transition-delay: 0s;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs li.tab {
    margin: initial;
    border-top: 1px solid transparent;
    border-left: 3px solid transparent;
    border-right: 1px solid transparent;
    border-bottom: 1px solid transparent;
  }
}
.post-body .tabs ul.nav-tabs li.tab a {
  outline: 0;
  border-bottom: initial;
  display: block;
  line-height: 1.8em;
  padding: 0.25em 0.75em;
  transition-duration: 0.2s;
  transition-timing-function: ease-out;
  transition-delay: 0s;
}
.post-body .tabs ul.nav-tabs li.tab a i {
  width: 1.285714285714286em;
}
.post-body .tabs ul.nav-tabs li.tab.active {
  border-top: 3px solid #fc6423;
  border-left: 1px solid #ddd;
  border-right: 1px solid #ddd;
  background-color: #fff;
}
@media (max-width: 413px) {
  .post-body .tabs ul.nav-tabs li.tab.active {
    border-top: 1px solid #ddd;
    border-left: 3px solid #fc6423;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
  }
}
.post-body .tabs ul.nav-tabs li.tab.active a {
  cursor: default;
  color: #555;
}
.post-body .tabs .tab-content {
  background-color: #fff;
}
.post-body .tabs .tab-content .tab-pane {
  border: 1px solid #ddd;
  padding: 20px 20px 0 20px;
}
.post-body .tabs .tab-content .tab-pane:not(.active) {
  display: none !important;
}
.post-body .tabs .tab-content .tab-pane.active {
  display: block !important;
}
.btn {
  display: inline-block;
  padding: 0 20px;
  font-size: 14px;
  color: #555;
  background: #fff;
  border: 2px solid #555;
  text-decoration: none;
  border-radius: 2px;
  transition-property: background-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  line-height: 2;
}
.btn:hover {
  border-color: #222;
  color: #fff;
  background: #222;
}
.btn +.btn {
  margin: 0 0 8px 8px;
}
.btn .fa-fw {
  width: 1.285714285714286em;
  text-align: left;
}
.btn-bar {
  display: block;
  width: 22px;
  height: 2px;
  background: #555;
  border-radius: 1px;
}
.btn-bar+.btn-bar {
  margin-top: 4px;
}
.pagination {
  margin: 120px 0 40px;
  text-align: center;
  border-top: 1px solid #eee;
}
.page-number-basic,
.pagination .prev,
.pagination .next,
.pagination .page-number,
.pagination .space {
  display: inline-block;
  position: relative;
  top: -1px;
  margin: 0 10px;
  padding: 0 11px;
}
@media (max-width: 767px) {
  .page-number-basic,
  .pagination .prev,
  .pagination .next,
  .pagination .page-number,
  .pagination .space {
    margin: 0 5px;
  }
}
.pagination .prev,
.pagination .next,
.pagination .page-number {
  border-bottom: 0;
  border-top: 1px solid #eee;
  transition-property: border-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.pagination .prev:hover,
.pagination .next:hover,
.pagination .page-number:hover {
  border-top-color: #222;
}
.pagination .space {
  padding: 0;
  margin: 0;
}
.pagination .prev {
  margin-left: 0;
}
.pagination .next {
  margin-right: 0;
}
.pagination .page-number.current {
  color: #fff;
  background: #ccc;
  border-top-color: #ccc;
}
@media (max-width: 767px) {
  .pagination {
    border-top: none;
  }
  .pagination .prev,
  .pagination .next,
  .pagination .page-number {
    margin-bottom: 10px;
    border-top: 0;
    border-bottom: 1px solid #eee;
    padding: 0 10px;
  }
  .pagination .prev:hover,
  .pagination .next:hover,
  .pagination .page-number:hover {
    border-bottom-color: #222;
  }
}
.comments {
  margin: 60px 20px 0;
}
.back-to-top {
  visibility: hidden;
  margin: 8px -10px -20px;
  background: #eee;
  font-size: 12px;
  opacity: 0.6;
  cursor: pointer;
  text-align: center;
}
.back-to-top:hover {
  opacity: 0.8;
}
@media (max-width: 991px) {
  .back-to-top {
    display: none !important;
  }
}
.back-to-top.back-to-top-on {
  visibility: visible;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.header {
  background: transparent;
}
.header-inner {
  position: relative;
}
.headband {
  height: 3px;
  background: #222;
}
.site-meta {
  margin: 0;
  text-align: center;
}
@media (max-width: 767px) {
  .site-meta {
    text-align: center;
  }
}
.brand {
  position: relative;
  display: inline-block;
  padding: 0 40px;
  color: #fff;
  background: #222;
  border-bottom: none;
}
.brand:hover {
  color: #fff;
}
.logo {
  display: inline-block;
  margin-right: 5px;
  line-height: 36px;
  vertical-align: top;
}
.site-title {
  display: inline-block;
  vertical-align: top;
  line-height: 36px;
  font-size: 20px;
  font-weight: normal;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
.site-subtitle {
  margin-top: 10px;
  font-size: 13px;
  color: #ddd;
}
.use-motion .brand {
  opacity: 0;
}
.use-motion .logo,
.use-motion .site-title,
.use-motion .site-subtitle,
.use-motion .custom-logo-image {
  opacity: 0;
  position: relative;
  top: -10px;
}
.site-nav-toggle {
  display: none;
  position: absolute;
  top: 10px;
  left: 10px;
}
@media (max-width: 767px) {
  .site-nav-toggle {
    display: block;
  }
}
.site-nav-toggle button {
  margin-top: 2px;
  padding: 9px 10px;
  background: transparent;
  border: none;
}
@media (max-width: 767px) {
  .site-nav {
    display: none;
    margin: 0 -10px;
    padding: 0 10px;
    clear: both;
    border-top: 1px solid #ddd;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav {
    display: block !important;
  }
}
@media (min-width: 992px) {
  .site-nav {
    display: block !important;
  }
}
.menu {
  margin-top: 20px;
  padding-left: 0;
  text-align: center;
}
.menu .menu-item {
  display: inline-block;
  margin: 0 10px;
  list-style: none;
}
@media (max-width: 767px) {
  .menu .menu-item {
    margin-top: 10px;
  }
}
.menu .menu-item a,
.menu .menu-item span.exturl {
  display: block;
  font-size: 13px;
  line-height: inherit;
  border-bottom: 1px solid transparent;
  transition-property: border-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.menu .menu-item a:hover,
.menu .menu-item span.exturl:hover {
  border-bottom-color: #222;
}
.menu .menu-item .fa {
  margin-right: 5px;
}
.use-motion .menu-item {
  opacity: 0;
}
.post-body {
  overflow-wrap: break-word;
  word-wrap: break-word;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
.post-body span.exturl .fa {
  font-size: 14px;
  margin-left: 4px;
}
.post-body .fancybox img {
  display: block !important;
  margin: 0 auto;
  cursor: pointer;
  cursor: zoom-in;
}
.post-body .image-caption,
.post-body .figure .caption {
  margin: -20px auto 15px;
  text-align: center;
  font-size: 14px;
  color: #999;
  font-weight: bold;
  line-height: 1;
}
.post-sticky-flag {
  display: inline-block;
  font-size: 16px;
  transform: rotate(30deg);
}
.use-motion .post-block,
.use-motion .pagination,
.use-motion .comments {
  opacity: 0;
}
.use-motion .post-header {
  opacity: 0;
}
.use-motion .post-body {
  opacity: 0;
}
.use-motion .collection-title {
  opacity: 0;
}
.posts-expand {
  padding-top: 40px;
}
@media (max-width: 767px) {
  .posts-expand {
    margin: 0 20px;
  }
  .post-body pre .gutter pre {
    padding-right: 10px;
  }
  .post-body .highlight {
    margin-left: 0px;
    margin-right: 0px;
    padding: 0;
  }
  .post-body .highlight .gutter pre {
    padding-right: 10px;
  }
}
@media (min-width: 992px) {
  .posts-expand .post-body {
    text-align: justify;
  }
}
@media (max-width: 991px) {
  .posts-expand .post-body {
    text-align: justify;
  }
}
.posts-expand .post-body h2,
.posts-expand .post-body h3,
.posts-expand .post-body h4,
.posts-expand .post-body h5,
.posts-expand .post-body h6 {
  padding-top: 10px;
}
.posts-expand .post-body h2 .header-anchor,
.posts-expand .post-body h3 .header-anchor,
.posts-expand .post-body h4 .header-anchor,
.posts-expand .post-body h5 .header-anchor,
.posts-expand .post-body h6 .header-anchor {
  float: right;
  margin-left: 10px;
  color: #ccc;
  border-bottom-style: none;
  visibility: hidden;
}
.posts-expand .post-body h2 .header-anchor:hover,
.posts-expand .post-body h3 .header-anchor:hover,
.posts-expand .post-body h4 .header-anchor:hover,
.posts-expand .post-body h5 .header-anchor:hover,
.posts-expand .post-body h6 .header-anchor:hover {
  color: inherit;
}
.posts-expand .post-body h2:hover .header-anchor,
.posts-expand .post-body h3:hover .header-anchor,
.posts-expand .post-body h4:hover .header-anchor,
.posts-expand .post-body h5:hover .header-anchor,
.posts-expand .post-body h6:hover .header-anchor {
  visibility: visible;
}
.posts-expand .post-body ul > li {
  list-style: circle;
}
.posts-expand .post-body img {
  box-sizing: border-box;
  margin: 0 auto 25px;
  padding: 3px;
  border: 1px solid #ddd;
}
@media (max-width: 767px) {
  .posts-collapse {
    margin: 0 20px;
  }
  .posts-collapse .post-title,
  .posts-collapse .post-meta {
    display: block;
    width: auto;
    text-align: left;
  }
}
.posts-collapse {
  position: relative;
  z-index: 1010;
  margin-left: 55px;
}
.posts-collapse::after {
  content: " ";
  position: absolute;
  top: 20px;
  left: 0;
  margin-left: -2px;
  width: 4px;
  height: 100%;
  background: #f5f5f5;
  z-index: -1;
}
@media (max-width: 767px) {
  .posts-collapse {
    margin: 0 20px;
  }
}
.posts-collapse .collection-title {
  position: relative;
  margin: 60px 0;
}
.posts-collapse .collection-title h1,
.posts-collapse .collection-title h2 {
  margin-left: 20px;
}
.posts-collapse .collection-title small {
  color: #bbb;
  margin-left: 5px;
}
.posts-collapse .collection-title::before {
  content: " ";
  position: absolute;
  left: 0;
  top: 50%;
  margin-left: -4px;
  margin-top: -4px;
  width: 8px;
  height: 8px;
  background: #bbb;
  border-radius: 50%;
}
.posts-collapse .post {
  margin: 30px 0;
}
.posts-collapse .post-header {
  position: relative;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: border;
  border-bottom: 1px dashed #ccc;
}
.posts-collapse .post-header::before {
  content: " ";
  position: absolute;
  left: 0;
  top: 12px;
  width: 6px;
  height: 6px;
  margin-left: -4px;
  background: #bbb;
  border-radius: 50%;
  border: 1px solid #fff;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: background;
}
.posts-collapse .post-header:hover {
  border-bottom-color: #666;
}
.posts-collapse .post-header:hover::before {
  background: #222;
}
.posts-collapse .post-meta {
  position: absolute;
  font-size: 12px;
  left: 20px;
  top: 5px;
}
.posts-collapse .post-comments-count {
  display: none;
}
.posts-collapse .post-title {
  margin-left: 60px;
  font-size: 16px;
  font-weight: normal;
  line-height: inherit;
}
.posts-collapse .post-title::after {
  margin-left: 3px;
  opacity: 0.6;
}
.posts-collapse .post-title a,
.posts-collapse .post-title span.exturl {
  color: #666;
  border-bottom: none;
}
.page-home .post-type-quote .post-header,
.page-post-detail .post-type-quote .post-header,
.page-home .post-type-quote .post-tags,
.page-post-detail .post-type-quote .post-tags {
  display: none;
}
.posts-expand .post-title {
  overflow-wrap: break-word;
  word-wrap: break-word;
  text-align: center;
  font-weight: 400;
}
.posts-expand .post-title-link {
  display: inline-block;
  position: relative;
  color: #555;
  border-bottom: none;
  line-height: 1.2;
  vertical-align: top;
}
.posts-expand .post-title-link::before {
  content: "";
  position: absolute;
  width: 100%;
  height: 2px;
  bottom: 0;
  left: 0;
  background-color: #000;
  visibility: hidden;
  transform: scaleX(0);
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
.posts-expand .post-title-link:hover::before {
  visibility: visible;
  transform: scaleX(1);
}
.posts-expand .post-title-link .fa {
  font-size: 20px;
  margin-left: 5px;
}
.posts-expand .post-meta {
  margin: 3px 0 60px 0;
  color: #999;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
  font-size: 12px;
  text-align: center;
}
.posts-expand .post-meta .post-category-list {
  display: inline-block;
  margin: 0;
  padding: 3px;
}
.posts-expand .post-meta .post-category-list-link {
  color: #999;
}
.posts-expand .post-meta .post-description {
  font-size: 14px;
  margin-top: 2px;
}
.posts-expand .post-meta time {
  border-bottom: 1px dashed #999;
  cursor: help;
}
.post-meta-divider {
  margin: 0 0.5em;
}
.post-meta-item-icon {
  margin-right: 3px;
}
@media (min-width: 768px) and (max-width: 991px) {
  .post-meta-item-icon {
    display: inline-block;
  }
}
@media (max-width: 767px) {
  .post-meta-item-icon {
    display: inline-block;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .post-meta-item-text {
    display: none;
  }
}
@media (max-width: 767px) {
  .post-meta-item-text {
    display: none;
  }
}
.post-button {
  margin-top: 40px;
}
.posts-expand .post-tags {
  margin-top: 40px;
  text-align: center;
}
.posts-expand .post-tags a {
  display: inline-block;
  margin-right: 10px;
  font-size: 13px;
}
.post-nav {
  display: table;
  margin-top: 15px;
  width: 100%;
  border-top: 1px solid #eee;
}
.post-nav-divider {
  display: table-cell;
  width: 10%;
}
.post-nav-item {
  display: table-cell;
  padding: 10px 0 0 0;
  width: 45%;
  vertical-align: top;
}
.post-nav-item a {
  position: relative;
  display: block;
  line-height: 25px;
  font-size: 14px;
  color: #555;
  border-bottom: none;
}
.post-nav-item a:hover {
  color: #222;
  border-bottom: none;
}
.post-nav-item a:active {
  top: 2px;
}
.post-nav-item .fa {
  font-size: 12px;
  margin-right: 5px;
}
.post-nav-next a {
  padding-left: 5px;
}
.post-nav-prev {
  text-align: right;
}
.post-nav-prev a {
  padding-right: 5px;
}
.post-nav-prev .fa {
  margin-left: 5px;
}
.posts-expand .post-eof {
  display: block;
  margin: 80px auto 60px;
  width: 8%;
  height: 1px;
  background: #ccc;
  text-align: center;
}
.post:last-child .post-eof.post-eof.post-eof {
  display: none;
}
.post-gallery {
  display: table;
  table-layout: fixed;
  width: 100%;
  border-collapse: separate;
}
.post-gallery-row {
  display: table-row;
}
.post-gallery .post-gallery-img {
  display: table-cell;
  text-align: center;
  vertical-align: middle;
  border: none;
}
.post-gallery .post-gallery-img img {
  max-width: 100%;
  max-height: 100%;
  border: none;
}
.fancybox-close,
.fancybox-close:hover {
  border: none;
}
.post-copyright {
  margin: 2em 0 0;
  padding: 0.5em 1em;
  border-left: 3px solid #ff1700;
  background-color: #f9f9f9;
  list-style: none;
}
.post-copyright i.fa {
  font-size: 15px;
}
.rtl.post-body p,
.rtl.post-body a,
.rtl.post-body h1,
.rtl.post-body h2,
.rtl.post-body h3,
.rtl.post-body h4,
.rtl.post-body h5,
.rtl.post-body h6,
.rtl.post-body li,
.rtl.post-body ul,
.rtl.post-body ol {
  direction: rtl;
  font-family: UKIJ Ekran;
}
.rtl.post-title {
  font-family: UKIJ Ekran;
}
.sidebar {
  position: fixed;
  right: 0;
  top: 0;
  bottom: 0;
  width: 0;
  z-index: 1040;
  box-shadow: inset 0 2px 6px #000;
  background: #222;
}
.sidebar a,
.sidebar span.exturl {
  color: #999;
  border-bottom-color: #555;
}
.sidebar a:hover,
.sidebar span.exturl:hover {
  color: #eee;
  border-bottom-color: #eee;
}
@media (max-width: 991px) {
  .sidebar {
    display: none !important;
  }
}
.sidebar-inner {
  position: relative;
  padding: 20px 10px;
  color: #999;
  text-align: center;
}
.site-overview-wrap {
  overflow: hidden;
}
.site-overview {
  overflow-y: auto;
  overflow-x: hidden;
}
.cc-license {
  margin-top: 10px;
  text-align: center;
}
.cc-license .cc-opacity {
  opacity: 0.7;
  border-bottom: none;
}
.cc-license .cc-opacity:hover {
  opacity: 0.9;
}
.cc-license img {
  display: inline-block;
}
.sidebar-toggle {
  position: fixed;
  right: 30px;
  bottom: 45px;
  width: 14px;
  height: 14px;
  padding: 5px;
  background: #222;
  line-height: 0;
  z-index: 1050;
  cursor: pointer;
}
.sidebar-toggle:hover .sidebar-toggle-line {
  background: #fc6423;
}
@media (min-width: 768px) and (max-width: 991px) {
  .sidebar-toggle {
    display: none !important;
  }
}
@media (max-width: 767px) {
  .sidebar-toggle {
    display: none !important;
  }
}
.sidebar-toggle-line {
  position: relative;
  display: inline-block;
  vertical-align: top;
  height: 2px;
  width: 100%;
  background: #fff;
  margin-top: 3px;
}
.sidebar-toggle-line:first-child {
  margin-top: 0;
}
.site-author-image {
  display: block;
  margin: 0 auto;
  padding: 2px;
  max-width: 120px;
  height: auto;
  border: 1px solid #eee;
  opacity: 1;
}
.site-author-image {
  border-radius: 100%;
}
.site-author-name {
  margin: 0;
  text-align: center;
  color: #222;
  font-weight: 600;
}
.site-description {
  margin-top: 0;
  text-align: center;
  font-size: 13px;
  color: #999;
}
.links-of-author {
  margin-top: 20px;
}
.links-of-author a,
.links-of-author span.exturl {
  display: inline-block;
  vertical-align: middle;
  margin-right: 10px;
  margin-bottom: 10px;
  border-bottom-color: #555;
  font-size: 13px;
}
.links-of-author a:before,
.links-of-author span.exturl:before {
  display: inline-block;
  vertical-align: middle;
  margin-right: 3px;
  content: " ";
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: #7f01ff;
}
.feed-link,
.chat {
  margin-top: 10px;
}
.feed-link a,
.chat a {
  display: inline-block;
  padding: 0 15px;
  color: #fc6423;
  border: 1px solid #fc6423;
  border-radius: 4px;
}
.feed-link a i,
.chat a i {
  color: #fc6423;
  font-size: 14px;
}
.feed-link a:hover,
.chat a:hover {
  color: #fff;
  background: #fc6423;
}
.feed-link a:hover i,
.chat a:hover i {
  color: #fff;
}
.links-of-blogroll {
  margin-top: 10px;
  font-size: 13px;
}
.links-of-blogroll-title {
  margin-top: 0;
  font-size: 14px;
  font-weight: 600;
}
.links-of-blogroll-list {
  margin: 0;
  padding: 0;
  list-style: none;
}
.links-of-blogroll-item {
  padding: 2px 10px;
}
.links-of-blogroll-item a,
.links-of-blogroll-item span.exturl {
  max-width: 280px;
  box-sizing: border-box;
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.sidebar-nav {
  margin: 0 0 20px;
  padding-left: 0;
}
.sidebar-nav li {
  display: inline-block;
  cursor: pointer;
  border-bottom: 1px solid transparent;
  font-size: 14px;
  color: #555;
}
.sidebar-nav li:hover {
  color: #fc6423;
}
.page-post-detail .sidebar-nav-toc {
  padding: 0 5px;
}
.page-post-detail .sidebar-nav-overview {
  margin-left: 10px;
}
.sidebar-nav .sidebar-nav-active {
  color: #fc6423;
  border-bottom-color: #fc6423;
}
.sidebar-nav .sidebar-nav-active:hover {
  color: #fc6423;
}
.sidebar-panel {
  display: none;
}
.sidebar-panel-active {
  display: block;
}
.site-state {
  display: flex;
  justify-content: center;
  overflow: hidden;
  line-height: 1.4;
  white-space: nowrap;
  text-align: center;
  margin-top: 10px;
}
.site-state-item {
  padding: 0 15px;
  border-left: 1px solid #eee;
}
.site-state-item:first-child {
  border-left: none;
}
.site-state-item a {
  border-bottom: none;
}
.site-state-item-count {
  display: block;
  text-align: center;
  color: inherit;
  font-weight: 600;
  font-size: 16px;
}
.site-state-item-name {
  font-size: 13px;
  color: #999;
}
.post-toc-empty {
  font-size: 14px;
  color: #666;
}
.post-toc-wrap {
  overflow: hidden;
}
.post-toc {
  overflow: auto;
}
.post-toc ol {
  margin: 0;
  padding: 0 2px 5px 10px;
  text-align: left;
  list-style: none;
  font-size: 14px;
}
.post-toc ol > ol {
  padding-left: 0;
}
.post-toc ol a {
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
  transition-property: all;
  color: #666;
  border-bottom-color: #ccc;
}
.post-toc ol a:hover {
  color: #000;
  border-bottom-color: #000;
}
.post-toc .nav-item {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.8;
}
.post-toc .nav .nav-child {
  display: block;
}
.post-toc .nav .active > .nav-child {
  display: block;
}
.post-toc .nav .active-current > .nav-child {
  display: block;
}
.post-toc .nav .active-current > .nav-child > .nav-item {
  display: block;
}
.post-toc .nav .active > a {
  color: #fc6423;
  border-bottom-color: #fc6423;
}
.post-toc .nav .active-current > a {
  color: #fc6423;
}
.post-toc .nav .active-current > a:hover {
  color: #fc6423;
}
.footer {
  font-size: 14px;
  color: #999;
}
.footer img {
  border: none;
}
.footer-inner {
  text-align: center;
}
.with-love {
  display: inline-block;
  margin: 0 5px;
  color: #808080;
}
.powered-by,
.theme-info {
  display: inline-block;
}
@-moz-keyframes iconAnimate {
  0%, 100% {
    transform: scale(1);
  }
  10%, 30% {
    transform: scale(0.9);
  }
  20%, 40%, 60%, 80% {
    transform: scale(1.1);
  }
  50%, 70% {
    transform: scale(1.1);
  }
}
@-webkit-keyframes iconAnimate {
  0%, 100% {
    transform: scale(1);
  }
  10%, 30% {
    transform: scale(0.9);
  }
  20%, 40%, 60%, 80% {
    transform: scale(1.1);
  }
  50%, 70% {
    transform: scale(1.1);
  }
}
@-o-keyframes iconAnimate {
  0%, 100% {
    transform: scale(1);
  }
  10%, 30% {
    transform: scale(0.9);
  }
  20%, 40%, 60%, 80% {
    transform: scale(1.1);
  }
  50%, 70% {
    transform: scale(1.1);
  }
}
@keyframes iconAnimate {
  0%, 100% {
    transform: scale(1);
  }
  10%, 30% {
    transform: scale(0.9);
  }
  20%, 40%, 60%, 80% {
    transform: scale(1.1);
  }
  50%, 70% {
    transform: scale(1.1);
  }
}
i.fa {
  font-family: FontAwesome !important;
}
.local-search-pop-overlay {
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 2080;
  background-color: rgba(0,0,0,0.3);
}
.local-search-popup {
  display: none;
  position: fixed;
  top: 10%;
  left: 50%;
  margin-left: -350px;
  width: 700px;
  height: 80%;
  padding: 0;
  background: #fff;
  color: #333;
  z-index: 9999;
  border-radius: 5px;
}
@media (max-width: 767px) {
  .local-search-popup {
    padding: 0;
    top: 0;
    left: 0;
    margin: 0;
    width: 100%;
    height: 100%;
    border-radius: 0;
  }
}
.local-search-popup ul.search-result-list {
  padding: 0;
  margin: 0 5px;
}
.local-search-popup p.search-result {
  border-bottom: 1px dashed #ccc;
  padding: 5px 0;
}
.local-search-popup a.search-result-title {
  font-weight: bold;
  font-size: 16px;
}
.local-search-popup .search-keyword {
  border-bottom: 1px dashed #f00;
  font-weight: bold;
  color: #f00;
}
.local-search-popup .local-search-header {
  padding: 5px;
  height: 36px;
  background: #f5f5f5;
  border-top-left-radius: 5px;
  border-top-right-radius: 5px;
}
.local-search-popup #local-search-result {
  overflow: auto;
  position: relative;
  padding: 5px 25px;
  height: calc(100% - 55px);
}
.local-search-popup .local-search-input-wrapper {
  display: inline-block;
  width: calc(100% - 90px);
  height: 36px;
  line-height: 36px;
  padding: 0 5px;
}
.local-search-popup .local-search-input-wrapper input {
  padding: 8px 0;
  height: 20px;
  display: block;
  width: 100%;
  outline: none;
  border: none;
  background: transparent;
  vertical-align: middle;
}
.local-search-popup .search-icon,
.local-search-popup .popup-btn-close {
  display: inline-block;
  font-size: 18px;
  color: #999;
  height: 36px;
  width: 18px;
  padding-left: 10px;
  padding-right: 10px;
}
.local-search-popup .search-icon {
  float: left;
}
.local-search-popup .popup-btn-close {
  border-left: 1px solid #eee;
  float: right;
  cursor: pointer;
}
.local-search-popup #no-result {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  color: #ccc;
}
.copy-btn {
  display: inline-block;
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 700;
  line-height: 20px;
  color: #333;
  white-space: nowrap;
  vertical-align: middle;
  cursor: pointer;
  background-color: #eee;
  background-image: linear-gradient(#fcfcfc, #eee);
  border: 1px solid #d5d5d5;
  border-radius: 3px;
  user-select: none;
  outline: 0;
}
.highlight-wrap .copy-btn {
  transition: opacity 0.3s ease-in-out;
  opacity: 0;
  padding: 2px 6px;
  position: absolute;
  right: 4px;
  top: 8px;
}
.highlight-wrap:hover .copy-btn,
.highlight-wrap .copy-btn:focus {
  opacity: 1;
}
.highlight-wrap {
  position: relative;
}
.has-jax {
  overflow-x: auto;
  overflow-y: hidden;
}
li {
  list-style-position: inside !important;
}
.page-archive .archive-page-counter {
  position: relative;
  top: 3px;
  left: 20px;
}
@media (max-width: 767px) {
  .page-archive .archive-page-counter {
    top: 5px;
  }
}
.page-archive .posts-collapse .archive-move-on {
  position: absolute;
  top: 11px;
  left: 0;
  margin-left: -6px;
  width: 10px;
  height: 10px;
  opacity: 0.5;
  background: #555;
  border: 1px solid #fff;
  border-radius: 50%;
}
.page-archive .fa-external-link {
  font-size: 15px;
  margin-left: 5px;
}
.category-all-page .category-all-title {
  text-align: center;
}
.category-all-page .category-all {
  margin-top: 20px;
}
.category-all-page .category-list {
  margin: 0;
  padding: 0;
  list-style: none;
}
.category-all-page .category-list-item {
  margin: 5px 10px;
}
.category-all-page .category-list-count {
  color: #bbb;
}
.category-all-page .category-list-count:before {
  display: inline;
  content: " (";
}
.category-all-page .category-list-count:after {
  display: inline;
  content: ") ";
}
.category-all-page .category-list-child {
  padding-left: 10px;
}
#schedule ul#event-list {
  padding-left: 30px;
}
#schedule ul#event-list hr {
  margin: 20px 0 45px 0 !important;
  background: #222;
}
#schedule ul#event-list hr:after {
  display: inline-block;
  content: 'NOW';
  background: #222;
  color: #fff;
  font-weight: bold;
  text-align: right;
  padding: 0 5px;
}
#schedule ul#event-list li.event {
  margin: 20px 0px;
  background: #f9f9f9;
  padding-left: 10px;
  min-height: 40px;
}
#schedule ul#event-list li.event h2.event-summary {
  margin: 0;
  padding-bottom: 3px;
}
#schedule ul#event-list li.event h2.event-summary:before {
  display: inline-block;
  font-family: FontAwesome;
  font-size: 8px;
  content: '\f111';
  vertical-align: middle;
  margin-right: 25px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-relative-time {
  display: inline-block;
  font-size: 12px;
  font-weight: 400;
  padding-left: 12px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-details {
  display: block;
  color: #bbb;
  margin-left: 56px;
  padding-top: 3px;
  padding-bottom: 6px;
  text-indent: -24px;
  line-height: 18px;
}
#schedule ul#event-list li.event span.event-details:before {
  text-indent: 0;
  display: inline-block;
  width: 14px;
  font-family: FontAwesome;
  text-align: center;
  margin-right: 9px;
  color: #bbb;
}
#schedule ul#event-list li.event span.event-details.event-location:before {
  content: '\f041';
}
#schedule ul#event-list li.event span.event-details.event-duration:before {
  content: '\f017';
}
#schedule ul#event-list li.event-past {
  background: #fcfcfc;
  padding: 15px 0 15px 10px;
}
#schedule ul#event-list li.event-past > * {
  opacity: 0.9;
}
#schedule ul#event-list li.event-past h2.event-summary {
  color: #bbb;
}
#schedule ul#event-list li.event-past h2.event-summary:before {
  color: #dfdfdf;
}
#schedule ul#event-list li.event-now {
  background: #222;
  color: #fff;
  padding: 15px 0 15px 10px;
}
#schedule ul#event-list li.event-now h2.event-summary:before {
  transform: scale(1.2);
  color: #fff;
  animation: dot-flash 1s alternate infinite ease-in-out;
}
#schedule ul#event-list li.event-now * {
  color: #fff !important;
}
#schedule ul#event-list li.event-future {
  background: #222;
  color: #fff;
  padding: 15px 0 15px 10px;
}
#schedule ul#event-list li.event-future h2.event-summary:before {
  transform: scale(1.2);
  color: #fff;
  animation: dot-flash 1s alternate infinite ease-in-out;
}
#schedule ul#event-list li.event-future * {
  color: #fff !important;
}
@-moz-keyframes dot-flash {
  from {
    opacity: 1;
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    transform: scale(1);
  }
}
@-webkit-keyframes dot-flash {
  from {
    opacity: 1;
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    transform: scale(1);
  }
}
@-o-keyframes dot-flash {
  from {
    opacity: 1;
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    transform: scale(1);
  }
}
@keyframes dot-flash {
  from {
    opacity: 1;
    transform: scale(1.1);
  }
  to {
    opacity: 0;
    transform: scale(1);
  }
}
.page-post-detail .sidebar-toggle-line {
  background: #fc6423;
}
.page-post-detail .comments {
  overflow: hidden;
}
ul.breadcrumb {
  list-style: none;
  margin: 1em 0;
  padding: 0 2em;
  text-align: center;
  font-size: 12px;
}
ul.breadcrumb li {
  display: inline;
}
ul.breadcrumb li+li:before {
  padding: 0.5em;
  font-weight: normal;
  content: "/\00a0";
}
ul.breadcrumb li+li:last-child {
  font-weight: bold;
}
.tag-cloud {
  text-align: center;
}
.tag-cloud a {
  display: inline-block;
  margin: 10px;
}
.tag-cloud a:hover {
  color: #222 !important;
}
.header {
  position: relative;
  margin: 0 auto;
  width: calc(100% - 20px);
}
@media (min-width: 1200px) {
  .header {
    width: 1160px;
  }
}
@media (min-width: 1600px) {
  .header {
    width: 73%;
  }
}
@media (max-width: 991px) {
  .header {
    width: auto;
  }
}
.header-inner {
  position: absolute;
  top: 0;
  overflow: hidden;
  padding: 0;
  width: 240px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
@media (min-width: 1200px) {
  .container .header-inner {
    width: 240px;
  }
}
@media (max-width: 991px) {
  .header-inner {
    position: relative;
    width: auto;
    border-radius: initial;
  }
}
.main:before,
.main:after {
  content: " ";
  display: table;
}
.main:after {
  clear: both;
}
@media (max-width: 991px) {
  .container .main-inner {
    width: auto;
  }
}
.content-wrap {
  float: right;
  box-sizing: border-box;
  padding: 40px;
  width: calc(100% - 252px);
  background: #fff;
  min-height: 700px;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
@media (min-width: 768px) and (max-width: 991px) {
  .content-wrap {
    width: 100%;
    padding: 20px;
    border-radius: initial;
  }
}
@media (max-width: 767px) {
  .content-wrap {
    width: 100%;
    padding: 20px;
    min-height: auto;
    border-radius: initial;
  }
}
.sidebar {
  position: static;
  float: left;
  margin-left: -100%;
  width: 240px;
  background: #eee;
  box-shadow: none;
}
@media (max-width: 991px) {
  .sidebar {
    display: none;
  }
}
.sidebar-toggle {
  display: none;
}
.footer-inner {
  padding-left: 260px;
}
@media (max-width: 991px) {
  .footer-inner {
    width: auto;
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}
.sidebar-position-right .header-inner {
  right: 0;
}
.sidebar-position-right .content-wrap {
  float: left;
}
.sidebar-position-right .sidebar {
  float: right;
}
.sidebar-position-right .footer-inner {
  padding-left: 0;
  padding-right: 260px;
}
.site-brand-wrapper {
  position: relative;
}
.site-meta {
  padding: 20px 0;
  color: #fff;
  background: #222;
}
@media (max-width: 991px) {
  .site-meta {
    box-shadow: 0 0 16px rgba(0,0,0,0.5);
  }
}
.brand {
  padding: 0;
  background: none;
}
.brand:hover {
  color: #fff;
}
.site-subtitle {
  margin: 10px 10px 0;
  font-weight: initial;
}
.custom-logo-image {
  margin-top: 20px;
}
@media (max-width: 991px) {
  .custom-logo-image {
    display: none;
  }
}
.site-search form {
  display: none;
}
.site-nav {
  border-top: none;
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav {
    display: none !important;
  }
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav-on {
    display: block !important;
  }
}
.menu-item-active a,
.menu .menu-item a:hover,
.menu .menu-item span.exturl:hover {
  background: #f9f9f9;
  border-bottom-color: #fff;
}
.menu .menu-item {
  display: block;
  margin: 0;
}
.menu .menu-item a,
.menu .menu-item span.exturl {
  position: relative;
  box-sizing: border-box;
  padding: 5px 20px;
  text-align: left;
  line-height: inherit;
  transition-property: background-color;
  transition-duration: 0.2s;
  transition-timing-function: ease-in-out;
  transition-delay: 0s;
}
@media (hover: none) {
  .menu .menu-item a:hover,
  .menu .menu-item span.exturl:hover {
    background: none;
  }
}
.menu .menu-item .badge {
  display: inline-block;
  padding: 2px 5px;
  font-weight: 700;
  line-height: 1;
  color: #fff;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  background-color: #ccc;
  border-radius: 10px;
  float: right;
  margin: 0.35em 0 0 0;
  text-shadow: 1px 1px 0px rgba(0,0,0,0.1);
}
.menu .menu-item br {
  display: none;
}
.btn-bar {
  background-color: #fff;
}
.site-nav-toggle {
  left: 20px;
  top: 50%;
  transform: translateY(-50%);
}
@media (min-width: 768px) and (max-width: 991px) {
  .site-nav-toggle {
    display: block;
  }
}
.sub-menu {
  margin: 0;
  padding: 6px 0;
  background: #fff !important;
  border-bottom: 1px solid #ddd;
}
.sub-menu .menu-item {
  display: inline-block !important;
}
.sub-menu .menu-item a,
.sub-menu .menu-item span.exturl {
  padding: initial !important;
  margin: 5px 10px;
}
.sub-menu .menu-item a:hover,
.sub-menu .menu-item span.exturl:hover {
  background: initial !important;
  color: #fc6423;
}
.sub-menu .menu-item-active a {
  background: #fff !important;
  color: #fc6423;
  border-bottom-color: #fc6423;
}
.sub-menu .menu-item-active a:hover {
  background: #fff !important;
  border-bottom-color: #fc6423;
}
.use-motion .sidebar .motion-element {
  opacity: 1;
}
.sidebar {
  right: auto;
  bottom: auto;
  -webkit-transform: none;
}
.sidebar a,
.sidebar span.exturl {
  color: #555;
}
.sidebar a:hover,
.sidebar span.exturl:hover {
  color: #222;
  border-bottom-color: #222;
}
.sidebar-inner {
  box-sizing: border-box;
  width: 240px;
  color: #555;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
  opacity: 0;
}
.sidebar-inner.affix {
  position: fixed;
  top: 12px;
}
.sidebar-inner.affix-bottom {
  position: absolute;
}
.site-overview {
  text-align: left;
}
.site-author:before,
.site-author:after {
  content: " ";
  display: table;
}
.site-author:after {
  clear: both;
}
.site-state-item {
  padding: 0 10px;
}
.feed-link,
.chat {
  border-top: 1px dotted #ccc;
  border-bottom: 1px dotted #ccc;
  text-align: center;
}
.feed-link a,
.chat a {
  display: block;
  color: #fc6423;
  border: none;
}
.feed-link a:hover,
.chat a:hover {
  background: none;
  color: #e34603;
}
.feed-link a:hover i,
.chat a:hover i {
  color: #e34603;
}
.links-of-author {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.links-of-author span.exturl {
  font-size: 13px;
}
.links-of-author-item {
  margin: 5px 0 0;
  width: 50%;
}
.links-of-author-item a,
.links-of-author-item span.exturl {
  max-width: 216px;
  box-sizing: border-box;
  display: inline-block;
  margin-right: 0;
  margin-bottom: 0;
  padding: 0 5px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.links-of-author-item a:before,
.links-of-author-item span.exturl:before {
  display: none;
}
.links-of-author-item a,
.links-of-author-item span.exturl {
  border-bottom: none;
  text-decoration: underline;
}
.links-of-author-item a,
.links-of-author-item span.exturl {
  display: block;
  text-decoration: none;
}
.links-of-author-item a:hover,
.links-of-author-item span.exturl:hover {
  border-radius: 4px;
  background: #eee;
}
.links-of-author-item .fa {
  margin-right: 2px;
  font-size: 16px;
}
.links-of-author-item .fa-globe {
  font-size: 15px;
}
.links-of-blogroll {
  text-align: center;
  padding: 3px 0 0;
}
.links-of-blogroll-item {
  padding: 0;
}
.links-of-blogroll-inline:before,
.links-of-blogroll-inline:after {
  content: " ";
  display: table;
}
.links-of-blogroll-inline:after {
  clear: both;
}
.links-of-blogroll-inline .links-of-blogroll-item {
  margin: 5px 0 0;
  width: 50%;
  display: inline-block;
  width: unset;
}
.links-of-blogroll-inline .links-of-blogroll-item a,
.links-of-blogroll-inline .links-of-blogroll-item span.exturl {
  max-width: 216px;
  box-sizing: border-box;
  display: inline-block;
  margin-right: 0;
  margin-bottom: 0;
  padding: 0 5px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.content-wrap {
  padding: initial;
  background: initial;
  box-shadow: initial;
  border-radius: initial;
}
.post-block {
  padding: 40px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
  border-radius: initial;
}
#posts > article + article .post-block {
  margin-top: 12px;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
}
.comments {
  padding: 40px;
  margin: auto;
  margin-top: 12px;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
}
.posts-expand {
  padding-top: initial;
}
.post-nav-divider {
  width: 4%;
}
.post-nav-item {
  width: 48%;
}
.post-eof,
.post-spread {
  display: none !important;
}
.pagination {
  margin: 12px 0 0;
  border-top: initial;
  background: #fff;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  border-radius: initial;
  padding: 10px 0 10px;
}
.pagination .prev,
.pagination .next,
.pagination .page-number {
  margin-bottom: initial;
  top: initial;
}
.main {
  padding-bottom: initial;
}
.footer {
  bottom: auto;
}
.sub-menu {
  border-bottom: initial !important;
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12);
}
.sub-menu+ #content > #posts .post-block {
  box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
  margin-top: 12px;
}
@media (min-width: 768px) and (max-width: 991px) {
  .sub-menu+ #content > #posts .post-block {
    margin-top: 10px;
  }
}
@media (max-width: 767px) {
  .sub-menu+ #content > #posts .post-block {
    margin-top: 8px;
  }
}
.post-header h1,
.post-header h2 {
  margin: initial;
}
.posts-expand .post-title-link {
  line-height: inherit;
}
.posts-expand .post-title {
  font-size: 1.7em;
}
.post-body h1 {
  font-size: 1.6em;
  border-bottom: 1px solid #eee;
}
.post-body h1 code {
  font-size: 1em;
}
.post-body h2 {
  font-size: 1.45em;
  border-bottom: 1px solid #eee;
}
.post-body h2 code {
  font-size: 1em;
}
.post-body h3 {
  font-size: 1.3em;
  border-bottom: 1px solid #eee;
}
.post-body h3 code {
  font-size: 1em;
}
.post-body h4 {
  font-size: 1.2em;
  border-bottom: 1px dotted #eee;
}
.post-body h4 code {
  font-size: 1em;
}
.post-body h5 {
  font-size: 1.07em;
}
.post-body h5 code {
  font-size: 1em;
}
.post-body h6 {
  font-size: 1.03em;
}
.post-body h6 code {
  font-size: 1em;
}
@media (min-width: 768px) and (max-width: 991px) {
  .content-wrap {
    padding: 10px;
  }
  .posts-expand {
    margin: initial;
  }
  .posts-expand .post-button {
    margin-top: 20px;
  }
  .post-block {
    padding: 20px;
    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
    border-radius: initial;
  }
  #posts > article + article .post-block {
    margin-top: 10px;
  }
  .comments {
    margin-top: 10px;
    padding: 10px 20px;
  }
  .pagination {
    margin: 10px 0 0;
  }
}
@media (max-width: 767px) {
  .content-wrap {
    padding: 8px;
  }
  .posts-expand {
    margin: initial;
  }
  .posts-expand .post-button {
    margin: 12px 0px;
  }
  .posts-expand img {
    padding: initial !important;
  }
  .post-block {
    padding: 12px;
    min-height: auto;
    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.06), 0 1px 5px 0 rgba(0,0,0,0.12), 0 -1px 0.5px 0 rgba(0,0,0,0.09);
    border-radius: initial;
  }
  #posts > article + article .post-block {
    margin-top: 8px;
  }
  .comments {
    margin-top: 8px;
    padding: 0 12px;
  }
  .pagination {
    margin: 8px 0 0;
  }
}
code {
  overflow-wrap: break-word;
  overflow-wrap: break-word;
  word-wrap: break-word;
  padding: 2px 4px;
  color: #900000;
  background: #ffe5e5;
  border-radius: 3px;
  font-size: 14px;
}
.site-title {
  display: inline-block;
  vertical-align: top;
  line-height: 36px;
  font-size: 30px;
  font-weight: normal;
  font-family: 'Lato', "PingFang SC", "Microsoft YaHei", sans-serif;
}
.tag-cloud a {
  display: inline-block;
  margin: 10px;
  text-shadow: 0 0 1px rgba(0,0,0,0.741);
}
.posts-expand .post-title-link {
  line-height: inherit;
  text-shadow: 0 0 1px #000;
}
p {
  margin: 0 0 20px 0;
  text-shadow: 0 0 0.1px #000;
}
.sidebar-nav .sidebar-nav-active {
  color: #c5031e;
  border-bottom-color: #c5031e;
  text-shadow: 0 0 1px #6d6b62;
}
.post-toc .nav-item {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 1.8;
  text-shadow: 0 0 0.5px #5f5e5e;
}</style><noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<script>function loadCss(l){var d=document,h=d.head,s=d.createElement('link');s.rel='stylesheet';s.href=l;!function e(f){if (d.body)return f();setTimeout(function(){e(f)})}(function(){h.appendChild(s);});}loadCss('/style.css');loadCss('//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css');</script><noscript><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></noscript></head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">渤海观星客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">The great pleasure in life is doing what people say you cannot do</h1>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    
      
    

    <a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags<span class="badge">19</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">4</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">31</span></a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/27/SQL/SQLserver_2Tips/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WD">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="渤海观星客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">SQLserver常见的10个陷阱

              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-27 22:59:17" itemprop="dateCreated datePublished" datetime="2019-04-27T22:59:17+08:00">2019-04-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-15 08:56:18" itemprop="dateModified" datetime="2019-08-15T08:56:18+08:00">2019-08-15</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/笔记/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>SQLsever作为受到广大企业用户的青睐、使用最广的数据库之一，凭借其丰富的内置函数，完善的权限管理，良好的拓展性和优越的性能一直备受好评。可是这么完美的数据库却往往暗藏杀机，接下来为大家拆招解招，看看项目过程冲常见的10个小陷阱。<br><strong>(本文是项目测试中实际遇到问题的总结，包含大量例子，建议阅读时间10分钟)</strong></p>
<h1 id="01-IsNumeric-的误判"><a href="#01-IsNumeric-的误判" class="headerlink" title="01 IsNumeric()的误判"></a>01 <code>IsNumeric()</code>的误判</h1><p>曾几何时，遇到过这样一个需求：</p>
<blockquote>
<p>表中的某一列是区号和地址简称的混合，有的是纯数字的地址，有的是包含字母的地址简称，要求sp将区号分离出来存储到另一张表。</p>
</blockquote>
<p>代码中写的很简单<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> columnA <span class="keyword">from</span> <span class="keyword">table</span> </span><br><span class="line"><span class="keyword">where</span> isnumeric(columnA) = <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这样写无疑满足了大多书情况下的需求，但是偏偏有些特殊的数字和字母捣乱<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> isnumeric(<span class="string">'123E-0001'</span>) </span><br><span class="line"><span class="comment">-- result-&gt;1 被判定位数字</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>原因就在于这是个科学计数法的表达方式，表示的其实是<code>12.3</code>的科学计数法形式，于是SQL Server认为它是数字，可是这条数据到了下游就毫无疑问的挂掉了。<br>因此还是得老老实实的用正则表达式，稳定的将非数字字符全部过滤掉<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> columnA <span class="keyword">from</span> <span class="keyword">table</span> </span><br><span class="line"><span class="keyword">where</span> columnA <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">'%[^0-9]%'</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>其实不仅科学计数法，<code>+</code>,<code>-</code>,即正负号也被认为是数字<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> isnumeric(<span class="string">'-'</span>)<span class="comment">-- result-&gt;1 被判定位数字</span></span><br><span class="line"><span class="keyword">select</span> isnumeric(<span class="string">'+'</span>)<span class="comment">-- result-&gt;1 被判定位数字</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<h1 id="02-Order怎么By"><a href="#02-Order怎么By" class="headerlink" title="02 Order怎么By"></a>02 <code>Order</code>怎么<code>By</code></h1><p>数据库中免不了各种排序，有时候要最大的，有时候要倒数的几个。。。但其实哪怕是数字模样的列也能坑人一个大跟头。</p>
<blockquote>
<p>假设表<code>#temptable</code>中有一列[A]值分别是<code>3,1,13,24,5</code>，想从小到大排序</p>
</blockquote>
<p>尝试直接执行下面的3种写法:<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#temptable </span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#temptable order by [A]</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#temptable order by cast([A] as int)</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<ol>
<li>第一种写法是数据库默认排序<code>3,1,13,24,5</code></li>
<li>第二种写法有没有发现<code>1，13，24，3，5</code>,顺序有点奇怪，因为SQL Server把它看成了varchar字符串，在他眼中<code>13</code>自然比<code>3</code>更小</li>
<li>第三中写法是比较靠谱的，将字符转化成<code>真数字</code>再进行排序。</li>
</ol>
<blockquote>
<p>这个点对于大量数据迁移的项目其实特别<strong>重要</strong>：<br>因为数据大量，所以没法一次传完。很多开发会再代码中要将几十万级别的数据读进内存，然后分块，1万条1万条的迁移数据，每迁移一万条就从内存删除1万条。而往往上游往下游传递数据时，往往即便是数字也会采取字符串类型来存储，待插入到下游数据库再转换回数字。<br>一旦疏忽大意，每次按照上游varchar排序来拷贝数据，然后再按照下游int类型排序来删除数据。。。结果大家都懂的！</p>
</blockquote>
<h1 id="03-忘记GRANT的表"><a href="#03-忘记GRANT的表" class="headerlink" title="03 忘记GRANT的表"></a>03 忘记<code>GRANT</code>的表</h1><p>如果说数据库什么最重要，我觉得获取数据的权限应该排在第一，因为没有权限就啥都莫有，不知道大家有没遇到这种情况</p>
<blockquote>
<p>数据库开发工程师辛苦写了一堆SP，自己exec一下,完美运行；<br>可是一到前端的应用那里，怎么跑怎么错！<br>前者自信的说自己写的肯定没错，后者也倔强的认为自己也没问题！</p>
</blockquote>
<p>这个时候，很可能是table或者sp没有授权。</p>
<p>在SQL Server中，</p>
<ol>
<li>可以用<code>sp_helpuser</code>查看自己是那种role，</li>
<li>可以用<code>sp_helprotect</code>查看对各种role开放了哪些权限。</li>
</ol>
<p><strong><code>矛盾在于</code></strong><br>数据库的开发组往往都是霸道总裁式的超管，可以对表<strong>为所欲为</strong>。<br>但是前台应用（用户）往往只有这些表的只读权限，只能远观、不可亵玩。<br>这就导致了开发测试代码时自己在IDE上<code>exec</code>起来像德芙一样丝滑，然后一到前端的应用上，就各种跪在地上唱征服，一旦没log，报错都木有。</p>
<h1 id="04-玄学毒药-NOT-IN"><a href="#04-玄学毒药-NOT-IN" class="headerlink" title="04 玄学毒药 NOT IN"></a>04 玄学毒药 <code>NOT IN</code></h1><p>数据库查询免不了经常排除掉一些数据，<code>not in</code>加子查询使用起来简单方便，但是一不小心就可能成为一个玄学毒药。</p>
<p>比如有两张表，一张表<code>#A</code>是所有客户的ID和name，另一张<code>#B</code>包含了已经付款客户的ID和name，我们想要筛选出未付款客户的名称，就可以简单的写下：<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#A where </span></span><br><span class="line">[<span class="keyword">name</span>] <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> [<span class="keyword">name</span>] <span class="keyword">from</span> <span class="comment">#B)</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这样来写基本功能是实现了，可<strong>健壮性</strong>不足。可是偏偏有一个客户付款的时候没告知姓名，只记录了ID，数据库中的name值是<code>null</code><br>那们问题就来了,我们的sql就等价于<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#A where </span></span><br><span class="line">[<span class="keyword">name</span>] <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">'jack'</span>,<span class="string">'tom'</span>,<span class="string">'nick'</span>,....,<span class="literal">null</span>)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这个<code>null</code>就成了玄学，会导致<code>整个，是整个</code>搜索结果为空集！这个在我们项目的report的逻辑中是个非常常见的bug。</p>
<p>想要避免也很容易,子查询加个条件就可以轻松解决，排除带哦<code>null</code><br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#A where </span></span><br><span class="line">[<span class="keyword">name</span>] <span class="keyword">not</span> <span class="keyword">in</span> </span><br><span class="line">(<span class="keyword">select</span> [<span class="keyword">name</span>] <span class="keyword">from</span> <span class="comment">#B where [name] is not null)</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>但是实际上如果数据量较大，还是推荐使用<code>join</code>的方式，既效率又可以避免<code>null</code>带来的意外。<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="comment">#A left join #B </span></span><br><span class="line"><span class="keyword">on</span> A.name = B.name</span><br><span class="line"><span class="keyword">where</span> b.name <span class="keyword">is</span> <span class="literal">null</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<h1 id="05-VARCHAR没有N"><a href="#05-VARCHAR没有N" class="headerlink" title="05 VARCHAR没有N"></a>05 <code>VARCHAR</code>没有<code>N</code></h1><p><code>varchar</code>和<code>nvarchar</code>都是SQL Server的字符串数据类型，前者占地小但是支持的字符穿少，后者体积大，可是支持的字符类型也多。</p>
<blockquote>
<p>在数据库纷繁的逻辑之中，免不了两种数据类型的相互转化，<code>varchar</code>转<code>nvarchar</code>其实还好，倒过来往往就会因为疏忽而出错。</p>
</blockquote>
<p>假设有个页面，输入一个值insert到数据库时采取了两种写法（好像新版本的SQL Server已经可以智能识别了）：<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> N<span class="string">'★'</span> <span class="comment">--result-&gt;★</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">'★'</span> <span class="comment">--result-&gt;?</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>上面的 <strong><code>N</code></strong> 表示让数据库存储的时候用<code>unicode</code>来存储这个<code>★</code>字符，下面的写法在遇到varchar不支持的类型时，很可能会输出一个大大的问号，从而导致数据的丢失。</p>
<p>如果你的客户都是英文，德文等varchar可以包含的字符还好。但是请给葡萄牙客户、匈牙利客户一些关爱。<br>下面简单的搜索方法就可以看出找出那些孤儿<code>(如果你的项目中找到了第一个，放心，那就肯定不止一个了)</code>,假设<code>column1</code>是<code>nvarchar</code>：<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> column1,<span class="keyword">cast</span>(column1 <span class="keyword">as</span> <span class="built_in">varchar</span>) <span class="keyword">from</span> <span class="comment">#table </span></span><br><span class="line"><span class="keyword">where</span>  column1 != <span class="keyword">cast</span>(column1 <span class="keyword">as</span> <span class="built_in">varchar</span>)</span><br></pre></td></tr></tbody></table></figure><p></p>
<h1 id="06-包藏祸心的VIEW"><a href="#06-包藏祸心的VIEW" class="headerlink" title="06 包藏祸心的VIEW"></a>06 包藏祸心的<code>VIEW</code></h1><p>很多小伙伴在写sp时候不喜欢使用原表（因为没有分库分表的架构中一张表可能好几百个字段），而是喜欢前人筛选好的视图，觉得视图里面那几列就够用了。</p>
<blockquote>
<p>但是这些VIEW相当于一个<code>打包好的sql</code>，实在是处处有惊喜。</p>
</blockquote>
<ol>
<li>有的视图里面加了top关键字，只选择出排在前面的数据，可能一千，也可能一万。用他们来join查询就会丢失数据。</li>
<li>很多的表包含一列日期（BusinessDate），在视图定义中 都添加了<code>where BusinessDate = getdate()</code>的条件来筛选出当前系统日期的数据。不注意就会发现怎么今天写的sql还能找到数据，第二天再一搜索就失灵了。。</li>
</ol>
<h1 id="07-XML和CSV的转义"><a href="#07-XML和CSV的转义" class="headerlink" title="07 XML和CSV的转义"></a>07 <code>XML</code>和<code>CSV</code>的转义</h1><p>既然是数据库，免不了要导出成XML文件和CSV文件，但是数据库中的特殊字符有时候会给我们造成极大的困扰。</p>
<p><strong><code>XML</code></strong><br>XML是基于HTML的标签语言，共有5个特殊的字符，分别是：<code>&amp;&lt;&gt;"'</code>。如果配置文件中的注入值包括这些特殊字符，就需要进行特别处理。否则他们就会破坏文档的数据结构，凡事忘记转化就导出成XML的必定BUG临头。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">含义</th>
<th style="text-align:center">字母</th>
<th style="text-align:center">实体转换</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>和</code></td>
<td style="text-align:center"><code>&amp;</code></td>
<td style="text-align:center"><code>&amp;amp;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>单引号</code></td>
<td style="text-align:center"><code>'</code></td>
<td style="text-align:center"><code>&amp;apos;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>双引号</code></td>
<td style="text-align:center"><code>"</code></td>
<td style="text-align:center"><code>&amp;quot;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>大于号</code></td>
<td style="text-align:center"><code>&gt;</code>,</td>
<td style="text-align:center"><code>&amp;gt;</code></td>
</tr>
<tr>
<td style="text-align:left"><code>小于号</code></td>
<td style="text-align:center"><code>&lt;</code></td>
<td style="text-align:center"><code>&amp;lt;</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong><code>CSV</code></strong><br>逗号分隔值（Comma-Separated Values，CSV），其文件以纯文本形式存储表格数据（数字和文本），文件的每一行都是一条数据记录。<br>那么我们就要注意以下几点:</p>
<ol>
<li>SQL Server中有3个杀手不能有,有的话就要用<code>双引号</code>括起来</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">ascll</th>
<th style="text-align:center">字符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>char(10)</code></td>
<td style="text-align:center"><code>\n</code></td>
<td style="text-align:center"><code>换行符LF</code></td>
</tr>
<tr>
<td style="text-align:center"><code>char(13)</code></td>
<td style="text-align:center"><code>\r</code></td>
<td style="text-align:center"><code>回车符CR</code></td>
</tr>
<tr>
<td style="text-align:center"><code>char(44)</code></td>
<td style="text-align:center"><code>，</code></td>
<td style="text-align:center"><code>常见的分隔符</code></td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><p>当字符中包含双号时，要像SQL Server的单引号转义一样，前面再加一个<code>双引号</code>当转义符号,不过。。。CSV只是一个技术规范，不同的程序对其有不同的支持。</p>
</li>
<li><p>可这样就完了么？<strong><code>NAIVE！</code></strong><br>但是我为什么说常见分隔符是逗号呢？<br>因为windows下用户是可以自己设置分隔符的：<br>【控制面板】-&gt;【时钟和区域】-&gt;【更改日期、时间格式】-&gt;【其他设置】-&gt;【列表分隔符】</p>
</li>
</ol>
<p>可以是管道线<code>|</code>，可以是制表符<code>TAB</code>，可以是其他奇奇怪怪的任何符号。如果使用SQL Server自带的导出功能会根据当前系统默认的分隔符来输出文件。然而我们永远不知道再下游等待的会是什么。</p>
<ol>
<li>其实不仅是分隔符，日期的输出格式也一样，<code>yyyy-mm-dd</code>，<code>yyyy/mm/dd</code>,<code>mm/dd/yyyy</code>。因此，一定要打听好下游接受时候会使用什么分隔符什么样的格式，否则一旦交付，<code>Production Issue</code>临头。</li>
</ol>
<h1 id="08-FLOAT的精度丢失"><a href="#08-FLOAT的精度丢失" class="headerlink" title="08 FLOAT的精度丢失"></a>08 <code>FLOAT</code>的精度丢失</h1><p>如果痛苦分10级，有一种痛苦叫<code>π</code>，不是很难受，但是无穷无尽。</p>
<blockquote>
<p><code>float</code>也一样，精度贼高，但是字符传递的时候很可能下游数据类型是个精度很短的字段。这时候就会发生精度丢失，甚至是系统报错。<br>这里不止是<code>float</code>，<code>numeric</code>,<code>decimal</code>类型数据都肯能出现问题</p>
</blockquote>
<p>我们往往可以在需求中找到取X位小数之类明确说明。<strong>但是这样真的明确么？</strong> 我就遇到过两种不同方法导致hash值对不上的问题。</p>
<p>对于<code>12345.6789</code>,是上游文件来的数据，数据库以文本类型读入<br>一般、也许，大概、可能会四舍五入，转化成<code>decimal(18,3)</code>，成了<code>12345.679</code>吧<br>但是老夫还是太天真，其实也可能会先获取了<code>.</code>的位置，长度加3，从左向右截取，成了<code>12345.678</code>。</p>
<p>何以解忧，唯有沟通！</p>
<h1 id="09-拼接SQL的Injection"><a href="#09-拼接SQL的Injection" class="headerlink" title="09 拼接SQL的Injection"></a>09 拼接SQL的<code>Injection</code></h1><p>介于代码的灵活性和某些需求，开发时经常在sp中定义很多的<code>@变量</code>，然后拼接成一个长长的句子，再用<code>exec</code>执行这个句子。可以如果忘了一个非常关键<code>单引</code>号转义，代码的健壮性就堪忧起来。看下面这个例子，</p>
<blockquote>
<p>设置一个变量<code>@sqlsatement</code>来当被拼接的这个sql，变量<code>@parameter1</code>来存储从<strong>不可知之地</strong>来的一个字符串，<code>@parameter2</code>表示我已经将这个字符串存储到了数据的一张表<code>#temptable</code>里面，<code>where 1=1</code>代表逻辑中奇奇怪怪的条件。现在，简单的将它select出来。</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @sqlsatement <span class="built_in">varchar</span>(<span class="number">300</span>)</span><br><span class="line"><span class="keyword">declare</span> @parameter1 <span class="built_in">varchar</span>(<span class="number">100</span>) =<span class="string">'abc'</span></span><br><span class="line"><span class="keyword">select</span> @parameter1 <span class="keyword">as</span> column1 <span class="keyword">into</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @parameter2 <span class="built_in">varchar</span>(<span class="number">100</span>) =(<span class="keyword">select</span> column1 <span class="keyword">from</span> <span class="comment">#temptable)</span></span><br><span class="line"><span class="keyword">set</span> @sqlsatement = <span class="string">'select '''</span>+ @parameter2 +<span class="string">''' where 1=1'</span></span><br><span class="line">exec (@sqlsatement)</span><br></pre></td></tr></tbody></table></figure>
<p>这段逻辑中，@sqlsatement的实际值是<code>select 'abc'</code>,简单而完美。</p>
<p>但是，某位用户输入了<code>金拱门</code>的洋文名<code>MacDonald's</code>，注意这个<code>单引号</code>，我们假设从<strong>不可知之地</strong>获得这个字符串时不涉及到单引号转义的问题。<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @sqlsatement <span class="built_in">varchar</span>(<span class="number">300</span>)</span><br><span class="line"><span class="keyword">declare</span> @parameter1 <span class="built_in">varchar</span>(<span class="number">100</span>) =<span class="string">'MacDonald''s'</span></span><br><span class="line"><span class="keyword">select</span> @parameter1 <span class="keyword">as</span> column1 <span class="keyword">into</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @parameter2 <span class="built_in">varchar</span>(<span class="number">100</span>) =(<span class="keyword">select</span> column1 <span class="keyword">from</span> <span class="comment">#temptable)</span></span><br><span class="line"><span class="keyword">set</span> @sqlsatement = <span class="string">'select '''</span>+ @parameter2 +<span class="string">''' where 1=1'</span></span><br><span class="line">exec (@sqlsatement)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这段逻辑中，<code>@sqlsatement</code>的实际值是<code>select 'MacDonald's'</code>，简单而完美的破坏了sql中字符串的语法，执行直接报错。</p>
<p>这看似是个小问题，其实包含这SQL注入的安全隐患。<br>如果有手黑心黑的用户输入了这样一个值<code>MacDonald''''s'';drop table EMP--</code><br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @sqlsatement <span class="built_in">varchar</span>(<span class="number">300</span>)</span><br><span class="line"><span class="keyword">declare</span> @parameter1 <span class="built_in">varchar</span>(<span class="number">100</span>) =<span class="string">'MacDonald''''s'';drop table EMP--'</span></span><br><span class="line"><span class="keyword">select</span> @parameter1 <span class="keyword">as</span> column1 <span class="keyword">into</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @parameter2 <span class="built_in">varchar</span>(<span class="number">100</span>) =(<span class="keyword">select</span> column1 <span class="keyword">from</span> <span class="comment">#temptable)</span></span><br><span class="line"><span class="keyword">set</span> @sqlsatement = <span class="string">'select '''</span>+ @parameter2 +<span class="string">''' where 1=1'</span></span><br><span class="line">exec (@sqlsatement)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这段逻辑中，@sqlsatement的实际值是<code>select 'MacDonald''s';drop table EMP--' where 1=1</code>SQL Server会将它认为是以下两句话:<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">'MacDonald''s'</span>;<span class="keyword">drop</span> <span class="keyword">table</span> EMP<span class="comment">--' where 1=1</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>先从数据库中去除了个字符串，然后丧心病狂<code>（gan de piao liang）</code>的在<code>分号</code>后面删掉了整张表，用<code>双减号</code>注释掉了后面执行的条件。执行之后自然无可避免的报了错。</p>
<p>其实,只要加一个小步骤，将单引号<code>转义</code>为双引号，问题便不存在了。<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @sqlsatement <span class="built_in">varchar</span>(<span class="number">300</span>)</span><br><span class="line"><span class="keyword">declare</span> @parameter1 <span class="built_in">varchar</span>(<span class="number">100</span>) =<span class="string">'MacDonald''s'</span></span><br><span class="line"><span class="keyword">select</span> @parameter1 <span class="keyword">as</span> column1 <span class="keyword">into</span> <span class="comment">#temptable</span></span><br><span class="line"><span class="keyword">declare</span> @parameter2 <span class="built_in">varchar</span>(<span class="number">100</span>) =(<span class="keyword">select</span> <span class="keyword">replace</span>(column1,<span class="string">''''</span>,<span class="string">''''''</span>) <span class="keyword">from</span> <span class="comment">#temptable)</span></span><br><span class="line"><span class="keyword">set</span> @sqlsatement = <span class="string">'select '''</span>+ @parameter2 +<span class="string">''' where 1=1'</span></span><br><span class="line">exec (@sqlsatement)</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>这段逻辑中，<code>@sqlsatement</code>的实际值是<code>select 'MacDonald''s'</code>，可以正常执行。</p>
<h1 id="10-JOIN的摇摆值"><a href="#10-JOIN的摇摆值" class="headerlink" title="10 JOIN的摇摆值"></a>10 <code>JOIN</code>的摇摆值</h1><p>表连接是数据库使用过程中基本操作，最常使用的的无非<code>inner join</code>和<code>left join</code>。一般来说，十几张表join无论先join哪张，最终的结果都会<strong>完全一样</strong>，BUT:</p>
<blockquote>
<ol>
<li>如果这个表连接跟在<code>update</code>后面，就会产生摇摆值。</li>
<li>如果是带有<code>rownum()</code>这类带自增序列性质的开窗函数时，就会产生随机的结果。</li>
</ol>
</blockquote>
<p>请看下面这个例子，3张表<code>#A</code>的A列、A2列,<code>#B</code>的B列,<code>#C</code>的C列</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">#A.A</th>
<th style="text-align:center">#A的另一列A2</th>
<th style="text-align:center">#B.B</th>
<th style="text-align:center">#C&gt;C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">我会重复</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">我会重复</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">我会重复</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">我会重复</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">我会重复</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<p>我们就选择普通的<code>inner join</code>,<br></p><figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> A2) ,A,B,C <span class="keyword">from</span> </span><br><span class="line"><span class="comment">#A	inner join #B on #A.A = #B.B</span></span><br><span class="line">	<span class="keyword">inner</span> <span class="keyword">join</span> <span class="comment">#C on #A.A = #C.C</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Row_Number</th>
<th style="text-align:center">#A</th>
<th style="text-align:center">#B</th>
<th style="text-align:center">#C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<p>其实本地尝试多少次都没用，结果会是完全一样的<br>但是如果再数据库里面定时运行的sp的话，可能就会根据数据库负载状态或者别的因素的影响而产生变化了，这是因为<code>inner join</code>中间省略了一个<code>hint</code>，这个东西可能是<code>hash</code>,<code>merge</code>也可能是<code>loop</code>。反正SQL Server在后台运算时，觉得那种会更快就智能判断一下join的顺序。可以尝试下面三种写法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> A2),A,B,C <span class="keyword">from</span> </span><br><span class="line"><span class="comment">#A	inner hash join #B on #A.A = #B.B</span></span><br><span class="line">	<span class="keyword">inner</span> <span class="keyword">hash</span> <span class="keyword">join</span> <span class="comment">#C on #A.A = #C.C</span></span><br></pre></td></tr></tbody></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Row_Number</th>
<th style="text-align:center">#A</th>
<th style="text-align:center">#B</th>
<th style="text-align:center">#C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> A2),A,B,C <span class="keyword">from</span> </span><br><span class="line"><span class="comment">#A	inner merge join #B on #A.A = #B.B</span></span><br><span class="line">	<span class="keyword">inner</span> <span class="keyword">merge</span> <span class="keyword">join</span> <span class="comment">#C on #A.A = #C.C</span></span><br></pre></td></tr></tbody></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Row_Number</th>
<th style="text-align:center">#A</th>
<th style="text-align:center">#B</th>
<th style="text-align:center">#C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> A2),A,B,C <span class="keyword">from</span> </span><br><span class="line"><span class="comment">#A	inner loop join #B on #A.A = #B.B</span></span><br><span class="line">	<span class="keyword">inner</span> <span class="keyword">loop</span> <span class="keyword">join</span> <span class="comment">#C on #A.A = #C.C</span></span><br></pre></td></tr></tbody></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Row_Number</th>
<th style="text-align:center">#A</th>
<th style="text-align:center">#B</th>
<th style="text-align:center">#C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<p>会发现SQL Server中，除了第一列外，其他结果都是顺序不同而已，但是结果集完全相同。<br>那么，再我们用不到这个自增序列下自然没有影响，万一用到了，呵呵。<br>遇到点到为止的update，如果多条满足就很可能产生摇摆值，呵呵x2。</p>
<p><strong><code>解决办法</code></strong>：</p>
<ol>
<li>上策是保证join条件的唯一性，最靠谱。</li>
<li>中策是在<code>orcer by</code>加上合适的条件。</li>
<li>下策是在结尾加一句<code>option (force order)</code>,强制join的顺序从上到下(常常在优化sql性能时候用到)</li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ROW_NUMBER() <span class="keyword">over</span>(<span class="keyword">order</span> <span class="keyword">by</span> A2),A,B,C <span class="keyword">from</span> </span><br><span class="line"><span class="comment">#A	inner join #B on #A.A = #B.B</span></span><br><span class="line">	<span class="keyword">inner</span> <span class="keyword">join</span> <span class="comment">#C on #A.A = #C.C</span></span><br><span class="line"><span class="keyword">option</span> (<span class="keyword">force</span> <span class="keyword">order</span>)</span><br></pre></td></tr></tbody></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Row_Number</th>
<th style="text-align:center">#A</th>
<th style="text-align:center">#B</th>
<th style="text-align:center">#C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
<td style="text-align:center">3_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">4_abcdefg</td>
<td style="text-align:center">2_abcdefg</td>
<td style="text-align:center">4_abcdefg</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">1_abcdefg</td>
<td style="text-align:center">5_abcdefg</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>以上就是我们测试中遇到的10个来自SQL Server的陷阱。其实，这样的陷阱还有很多，只在能否看破其中潜在的风险。<br>或许由于成本的限制，我们往往只能注重功能的实现，可代码的健壮性才是衡量软件质量的保证。我们不能寄奢望于用户小心翼翼的操作，便只能帮助他们不犯错，给用户更好的使用体验！</p>
</blockquote>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/数据库/" rel="tag"># 数据库</a>
          
            <a href="/tags/SQl/" rel="tag"># SQl</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/23/python/批量更改文件名/" rel="next" title="批量更改文件内容和名称">
                <i class="fa fa-chevron-left"></i> 批量更改文件内容和名称
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/04/27/SQL/SQLserver_1/" rel="prev" title="SQLserver_1数据库依赖关系">
                SQLserver_1数据库依赖关系 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="WD">
            
              <p class="site-author-name" itemprop="name">WD</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#01-IsNumeric-的误判"><span class="nav-text">01 IsNumeric()的误判</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#02-Order怎么By"><span class="nav-text">02 Order怎么By</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#03-忘记GRANT的表"><span class="nav-text">03 忘记GRANT的表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#04-玄学毒药-NOT-IN"><span class="nav-text">04 玄学毒药 NOT IN</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#05-VARCHAR没有N"><span class="nav-text">05 VARCHAR没有N</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#06-包藏祸心的VIEW"><span class="nav-text">06 包藏祸心的VIEW</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#07-XML和CSV的转义"><span class="nav-text">07 XML和CSV的转义</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#08-FLOAT的精度丢失"><span class="nav-text">08 FLOAT的精度丢失</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#09-拼接SQL的Injection"><span class="nav-text">09 拼接SQL的Injection</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-JOIN的摇摆值"><span class="nav-text">10 JOIN的摇摆值</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">© <span itemprop="copyrightYear">2021</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WD</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.0.1</div>




        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
















  
  



  
  



  
  



  
  
  





  
  <script src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  

  
  

  
  

  
  


  


  

  



  
  


  

  




  
  




  


  


  

  

  

  


  


  




  

  

  
  

  
  

  


  

  



  

  

  

  

  
  
  
  
  


  
  
  
  
  


  



  

  





<script type="text/javascript" src="/bundle.js"></script><script type="text/javascript">if ($('body').find('pre.mermaid').length) {
  $.ajax({
    type: 'GET',
    url: '//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js',
    dataType: 'script',
    cache: true,
    success: function() {
      mermaid.initialize({
        theme: 'forest',
        logLevel: 3,
        flowchart: { curve: 'linear' },
        gantt: { axisFormat: '%m/%d/%Y' },
        sequence: { actorMargin: 50 }
      });
    }
  });
};pangu.spacingPage();;bookmark.scrollToMark('auto', "#more");;$('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('Copy').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('Copy');
      }, 300);
    }).append(e);
  });InstantClick.init();</script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>